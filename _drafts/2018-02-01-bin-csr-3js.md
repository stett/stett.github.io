---
title: The BIN-CSR Sparse Matrix Format
layout: post
tags: [math, physics]
comments: false
math: false
jquery: true
threejs: true
---

<style>
div.container-3js canvas {
    background-color: #000;
    width: 100%;
    height: 256px;
    padding: 0;
    margin: 0;
    position: static; /* fixed or static */
}
</style>

<div class="container-3js" id="test-scene" style="width:100%; height:256px"></div>
<div class="container-3js" id="bin-csr" style="width:100%; height:256px"></div>

<script type="text/javascript">
$(document).ready(function() {

    console.log("READY");

    class Actor {
        update() {}
    }

    class SceneActor extends Actor {
        constructor(container) {
            super();
            var containerWidth = container.clientWidth;
            var containerHeight = container.clientHeight;
            var aspect = containerWidth / containerHeight;
            var height = 20;
            this.scene = new THREE.Scene();
            this.camera = new THREE.OrthographicCamera( -height*aspect, height*aspect, -height, height, 1, 1000);
            this.renderer = new THREE.WebGLRenderer();
            this.renderer.setSize( containerWidth, containerHeight );
            this.camera.position.z = 5;
            container.appendChild( this.renderer.domElement );
        }

        update() {
            this.renderer.render( this.scene, this.camera );
        }
    }

    class CubeActor extends Actor {
        constructor(scene, size=1) {
            super();
            var geometry = new THREE.BoxGeometry( size, size, size );
            var material = new THREE.MeshNormalMaterial();
            this.cube = new THREE.Mesh( geometry, material );
            scene.add( this.cube );
        }

        update() {
            this.cube.rotation.x += 0.1;
            this.cube.rotation.y += 0.1;
        }
    }

    // List of objects
    var actors = [];

    // Set up scene containers
    {
        var sceneActor = new SceneActor($("#test-scene").get(0));
        actors.push(sceneActor);
        actors.push(new CubeActor(sceneActor.scene));
    }

    {
        var sceneActor = new SceneActor($("#bin-csr").get(0));
        actors.push(sceneActor);
        actors.push(new CubeActor(sceneActor.scene, 4));
    }

    // Add the render method
    var update = function () {
        requestAnimationFrame( update );
        for (var i = 0, len = actors.length; i < len; ++i) {
            actors[i].update();
        }
    };

    // Render the scene
    update();

});
</script>
